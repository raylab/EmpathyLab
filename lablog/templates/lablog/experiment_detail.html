{% extends "base_generic.html" %}

{% block content %}
<script>
function openPage(pageName, elmnt, color) {
    // Hide all elements with class="tabcontent" by default */
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Remove the background color of all tablinks/buttons
    tablinks = document.getElementsByClassName("tablink");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].style.backgroundColor = "";
    }

    // Show the specific tab content
    document.getElementById(pageName).style.display = "block";

    // Add the specific color to the button used to open the tab content
    elmnt.style.backgroundColor = color;
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click(); 
</script>

<h1>Title: {{ experiment.title }}</h1>
<div style="margin-left:20px;margin-top:20px">
<p><strong>Summary:</strong> {{ experiment.summary }}</p>
<p><strong>ISBN:</strong> {{ experiment.isbn }}</p> 

<div class="tab">
  <button class="tablink" onclick="openPage('Feedback', this, 'DarkCyan')" id="defaultOpen">Feedback</button>
  <button class="tablink" onclick="openPage('Stimulae', this, 'DarkCyan')">Stimulae</button>
  <button class="tablink" onclick="openPage('Subjects', this, 'DarkCyan')">Subjects</button>
  <button class="tablink" onclick="openPage('Records', this, 'DarkCyan')">Records</button>
</div>

<div id="Feedback" class="tabcontent">
<p><h4>Feedback:</h4> </p> 
<hr>
<table>
 <tr>
<th>
{% for feedback in experiment.feedback.all %}{{ feedback }}{% if not forloop.last %}, {% endif %}{% endfor %}</p> 
</th>
<th>
<form>
    <input type="button" value="Add new feedback" onclick="window.location.href='{% url 'feedback_create'%}'" />
    </form>  
</th>
</tr>
</table>
</div>

<div id="Stimulae" class="tabcontent">
<p><h4>Stimulae:</h4> 
<hr>
<table>
 <tr>
<th>
{% for stimulae in experiment.stimulae.all %}{{stimulae}}{% if not forloop.last %}, {% endif %}{% endfor %}</p>  
</th>
<th>
<form>
    <input type="button" value="Add new stimulae" onclick="window.location.href='{% url 'stimulae_create'%}'" />
    </form>  
</th>
</tr>
</table>
</div>

<div id="Subjects" class="tabcontent">
<h4>Subjects</h4>
<hr>
<table>
 <tr>
<th>
<ul>
{% for subject in experiment.subjects.all %}
  <li>
    <a href="{% url 'subject-detail' subject.pk %}">{{ subject }}, {{ subject.date_of_birth }}, {{ subject.gender }}</a></p> 
  </li>
{% endfor %}
</ul>
</th>
<th>
<form>
    <input type="button" value="Register new subject" onclick="window.location.href='{% url 'subject_create'%}'" />
</form>
</th>
</tr>
</table>   
<hr>
</div>

<div id="Records" class="tabcontent">
<h4>Records</h4>
<hr>
<table>

{% for record in experiment.record_set.all %}
  <tr>
    <th>
       <p class="{% if record.status == 'a' %}text-success{% elif record.status == 'd' %}text-danger{% else %}text-warning{% endif %}">{{ record.get_status_display }}</p>
{% if record.status != 'a' %}{% endif %}
<p><strong>Imprint:</strong> {{record.imprint}}</p>
<a href="{{ record.get_absolute_url }}">{{ record }}</a>
</th>
</tr>
{% endfor %}
 <tr>
    <th>
<form>
    <input type="button" value="Create new record" onclick="window.location.href='{% url 'record_create'%}'" />
  </form> 
</th>
</tr>
</table>
</div>



</div>
{% endblock %}

